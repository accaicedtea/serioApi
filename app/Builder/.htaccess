RewriteEngine On

# Handle auth requests - check if file exists in auth/ directory first
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^auth/me$ auth/me.php [L]
RewriteRule ^auth/change-password$ auth/change-password.php [L]
RewriteRule ^auth/update-site-url$ auth/update-site-url.php [L]

# Route all other requests to endpoints
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^auth/?(.*)$ endpoints/auth.php [L,QSA]
RewriteRule ^categories/?(.*)$ endpoints/categories.php [L,QSA]
RewriteRule ^items/?(.*)$ endpoints/items.php [L,QSA]
RewriteRule ^allergens/?(.*)$ endpoints/allergens.php [L,QSA]
